# SPDX-FileCopyrightText: 2025 Avalon
# SPDX-FileCopyrightText: 2025 Honestly101
# SPDX-FileCopyrightText: 2025 Ilya246
# SPDX-FileCopyrightText: 2025 Redrover1760
# SPDX-FileCopyrightText: 2025 ScyronX
# SPDX-FileCopyrightText: 2025 starch
# SPDX-FileCopyrightText: 2025 wewman222
#
# SPDX-License-Identifier: AGPL-3.0-or-later

# MONOLITH MECH HARDPOINTS
- type: entity
  id: LightMechMount
  abstract: true
  categories: [ HideSpawnMenu ]
  components:
  - type: Mech
    equipmentWhitelist:
      tags:
      - LightMechMount
      - IFFMechMount

- type: entity
  id: MediumMechMount
  abstract: true
  categories: [ HideSpawnMenu ]
  components:
  - type: Mech
    equipmentWhitelist:
      tags:
      - MediumMechMount
      - IFFMechMount

- type: entity
  id: LightMultiroleMount
  abstract: true
  categories: [ HideSpawnMenu ]
  components:
  - type: Mech
    equipmentWhitelist:
      tags:
      - MediumMechMount
      - LightMechMount
      - IFFMechMount

- type: entity
  id: HeavyMechMount
  abstract: true
  categories: [ HideSpawnMenu ]
  components:
  - type: Mech
    equipmentWhitelist:
      tags:
      - HeavyMechMount
      - IFFMechMount

- type: entity
  id: EWARMechMount
  abstract: true
  categories: [ HideSpawnMenu ]
  components:
  - type: Mech
    equipmentWhitelist:
      tags:
      - EWARMechMount
      - LightMechMount
      - IFFMechMount


# S2 Mechas
- type: entity
  id: AFInterceptor
  parent: [ BaseMech, LightMechMount, BaseRestrictedContraband ]
  name: 'AF-28「阔剑」 | AF-28 "Broadsword"'
  description: '首批专用装甲机架之一，用于攻击轻型目标及其他装甲机架。 | One of the first purpose built Armored Frames, made to engage light targets and other Armored Frames.'
  components:
  - type: Fixtures
    fixtures: # Custom hitbox
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 0.9
        density: 300
        restitution: 0.0
        mask:
        - MobMask
        layer:
        - MobLayer
        - MachineLayer
  - type: Sprite
    drawdepth: Mobs
    noRot: true
    sprite: _Mono/Objects/Specific/Mech/mechaS2.rsi
    layers:
    - map: [ "enum.MechVisualLayers.Base" ]
      state: broadsword
    - map: ["enum.PaperLabelVisuals.Layer"]
      sprite: Structures/Storage/Crates/labels.rsi
      state: paper
  - type: FootstepModifier
    footstepSoundCollection:
      path: /Audio/Mecha/sound_mecha_powerloader_step.ogg
  - type: Mech
    baseState: broadsword
    openState: broadsword-open
    brokenState: broadsword-broken
    mechToPilotDamageMultiplier: 0
    maxEquipmentAmount: 3
    airtight: true
    maxIntegrity: 2400
    pilotWhitelist:
      components:
        - HumanoidAppearance
        - BorgChassis
  - type: MeleeWeapon
    hidden: true
    attackRate: 1
    damage:
      types:
        Blunt: 25
        Structural: 260
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 4800
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:ChangeConstructionNodeBehavior
        node: start
      - !type:DoActsBehavior
        acts: ["Destruction"]
  - type: RadarConsole
    maxRange: 512
    followEntity: true
  - type: Appearance
  - type: GenericVisualizer
  - type: CanMoveInAir
  - type: MovementAlwaysTouching
  # EXTREMELY slow in gravity. Only really good to taxi, and that's about it.
  - type: MovementSpeedModifier
    baseWalkSpeed: 0.2
    baseSprintSpeed: 1
    baseWeightlessModifier: 40
  - type: RadarBlip
    radarColor: "#E3E3E3"
    scale: 3
    requireNoGrid: true
    shape: square
  - type: Damageable
    damageModifierSet: HeavyArmorNT
  - type: Repairable
    fuelCost: 40
    doAfterDelay: 30
  - type: StaticPrice
    price: 3000
  - type: Tag
    tags:
    - DoorBumpOpener
    - FootstepSound
    - Broadsword
  - type: Prying
    pryPowered: true
    speedModifier: 3
    useSound:
      path: /Audio/Items/jaws_pry.ogg

- type: entity
  id: AFInterceptorBattery
  parent: AFInterceptor
  suffix: Battery
  components:
  - type: ContainerFill
    containers:
      mech-battery-slot:
      - PowerCageHigh

- type: entity
  id: AFInterceptorM
  parent: [ BaseMech, LightMultiroleMount, BaseRestrictedContraband ]
  name: 'AF-28-M「长戟」 | AF-28-M "Halberd"'
  description: '基于阔剑级改造的长戟级，通过削弱装甲与航速换取了重型武器挂载能力。 | A modification of the Broadsword, the Halberd sacrifices armor and speed for heavier weapon mounts.'
  components:
  - type: Fixtures
    fixtures: # Custom hitbox
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 0.9
        density: 300
        restitution: 0.0
        mask:
        - MobMask
        layer:
        - MobLayer
        - MachineLayer
  - type: Sprite
    drawdepth: Mobs
    noRot: true
    sprite: _Mono/Objects/Specific/Mech/mechaS2.rsi
    layers:
    - map: [ "enum.MechVisualLayers.Base" ]
      state: broadsword
    - map: ["enum.PaperLabelVisuals.Layer"]
      sprite: Structures/Storage/Crates/labels.rsi
      state: paper
  - type: FootstepModifier
    footstepSoundCollection:
      path: /Audio/Mecha/sound_mecha_powerloader_step.ogg
  - type: Mech
    baseState: broadsword
    openState: broadsword-open
    brokenState: broadsword-broken
    mechToPilotDamageMultiplier: 0
    maxEquipmentAmount: 3
    airtight: true
    maxIntegrity: 1800
    pilotWhitelist:
      components:
        - HumanoidAppearance
        - BorgChassis
  - type: MeleeWeapon
    hidden: true
    attackRate: 1
    damage:
      types:
        Blunt: 25
        Structural: 260
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 3600
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:ChangeConstructionNodeBehavior
        node: start
      - !type:DoActsBehavior
        acts: ["Destruction"]
  - type: RadarConsole
    maxRange: 512
    followEntity: true
  - type: Appearance
  - type: GenericVisualizer
  - type: CanMoveInAir
  - type: MovementAlwaysTouching
  # EXTREMELY slow in gravity. Only really good to taxi, and that's about it.
  - type: MovementSpeedModifier
    baseWalkSpeed: 0.2
    baseSprintSpeed: 1
    baseWeightlessModifier: 35
  - type: Damageable
    damageModifierSet: HeavyArmorNT
  - type: RadarBlip
    radarColor: "#E3E3E3"
    scale: 3
    requireNoGrid: true
    shape: square
  - type: Repairable
    fuelCost: 40
    doAfterDelay: 30
  - type: StaticPrice
    price: 3000
  - type: Tag
    tags:
    - DoorBumpOpener
    - FootstepSound
    - Halberd
    - MilitaryMechBounty
  - type: Prying
    pryPowered: true
    speedModifier: 3
    useSound:
      path: /Audio/Items/jaws_pry.ogg


- type: entity
  id: AFInterceptorG
  parent: [ BaseMech, LightMultiroleMount, BaseRestrictedContraband ]
  name: 'AF-28-G「军刀」战斗机 | AF-28-G "Sabre"'
  description: '基于阔剑的改进型号，军刀取消了喷气背包与太空防护盾功能以适配行星环境。配备两个挂载点，可搭载轻型或中型武器。 | A modification of the Broadsword, the Sabre sacrifices it''s jetpack and spaceproof shielding to function on planets. Has two hardpoints, which can carry Light or Medium hardpoints.'
  components:
  - type: Fixtures
    fixtures: # Custom hitbox
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 0.9
        density: 300
        restitution: 0.0
        mask:
        - MobMask
        layer:
        - MobLayer
        - MachineLayer
  - type: Sprite
    drawdepth: Mobs
    noRot: true
    sprite: _Mono/Objects/Specific/Mech/mechaS2.rsi
    layers:
    - map: [ "enum.MechVisualLayers.Base" ]
      state: broadsword
    - map: ["enum.PaperLabelVisuals.Layer"]
      sprite: Structures/Storage/Crates/labels.rsi
      state: paper
  - type: FootstepModifier
    footstepSoundCollection:
      path: /Audio/Mecha/sound_mecha_powerloader_step.ogg
  - type: Mech
    baseState: broadsword
    openState: broadsword-open
    brokenState: broadsword-broken
    mechToPilotDamageMultiplier: 0
    maxEquipmentAmount: 3
    airtight: false
    maxIntegrity: 1000
    pilotWhitelist:
      components:
        - HumanoidAppearance
        - BorgChassis
  - type: MeleeWeapon
    hidden: true
    attackRate: 1
    damage:
      types:
        Blunt: 25
        Structural: 260
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 2000
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:ChangeConstructionNodeBehavior
        node: start
      - !type:DoActsBehavior
        acts: ["Destruction"]
  # Terrible radar, mostly good for navigating planets
  - type: RadarConsole
    maxRange: 256
    followEntity: true
  - type: DetectionRangeMultiplier
    infraredMultiplier: 0.5 # from 1
    visualMultiplier: 3 # from 4
  - type: Appearance
  - type: GenericVisualizer
  - type: MovementAlwaysTouching
  # Only ground-based mecha so far. Don't use it in space. Can't move in space.
  - type: MovementSpeedModifier
    baseWalkSpeed: 3
    baseSprintSpeed: 6
  - type: Damageable
    damageModifierSet: HeavyArmorNT
  - type: RadarBlip
    radarColor: "#E3E3E3"
    scale: 3
    requireNoGrid: true
    shape: square
  - type: Repairable
    fuelCost: 40
    doAfterDelay: 30
  - type: StaticPrice
    price: 3000
  - type: Tag
    tags:
    - DoorBumpOpener
    - FootstepSound
    - Sabre
    - MilitaryMechBounty
  - type: Prying
    pryPowered: true
    speedModifier: 3
    useSound:
      path: /Audio/Items/jaws_pry.ogg

#4x4 mechas
- type: entity
  id: AFFlail
  parent: [ BaseMech, HeavyMechMount, BaseRestrictedContraband ]
  name: 'ASF-59「Flail」 | ASF-59 "Flail"'
  description: '市场上最新的机甲装甲强袭框架以其超规格武器挂架专为应对舰船级敌人而生。虽迟缓如猪却配备厚重装甲板以确保作战存活率。 | Newest mech on the market, the Armored Strike Frame is built to tackle ship-sized foes with it''s oversized weapon mounts. Slow as a pig however, it tacks on generous armor plating to survive it''s runs.'
  components:
  - type: Fixtures
    fixtures: # Custom hitbox
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 1.4
        density: 600
        restitution: 0.0
        mask:
        - MobMask
        layer:
        - MobLayer
        - MachineLayer
  - type: Sprite
    drawdepth: Mobs
    noRot: true
    sprite: _Mono/Objects/Specific/Mech/mechaS4.rsi
    layers:
    - map: [ "enum.MechVisualLayers.Base" ]
      state: flail
    - map: ["enum.PaperLabelVisuals.Layer"]
      sprite: Structures/Storage/Crates/labels.rsi
      state: paper
  - type: FootstepModifier
    footstepSoundCollection:
      path: /Audio/Mecha/sound_mecha_powerloader_step.ogg
  - type: Mech
    baseState: flail
    openState: flail-open
    brokenState: flail-broken
    mechToPilotDamageMultiplier: 0
    maxEquipmentAmount: 3
    airtight: true
    maxIntegrity: 4000
    pilotWhitelist:
      components:
        - HumanoidAppearance
        - BorgChassis
  - type: MeleeWeapon
    hidden: true
    attackRate: 1
    damage:
      types:
        Blunt: 50
        Structural: 550
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 8000
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:ChangeConstructionNodeBehavior
        node: start
      - !type:DoActsBehavior
        acts: ["Destruction"]
  - type: RadarConsole
    maxRange: 512
    followEntity: true
  - type: Appearance
  - type: GenericVisualizer
  - type: CanMoveInAir
  - type: MovementAlwaysTouching
  # EXTREMELY slow in gravity. Only really good to taxi, and that's about it. Even worse than S2s
  - type: MovementSpeedModifier
    baseWalkSpeed: 0.1
    baseSprintSpeed: 1
    baseWeightlessModifier: 25
  - type: RadarBlip
    radarColor: "#E3E3E3"
    scale: 3
    requireNoGrid: true
    shape: square
  - type: Damageable
    damageModifierSet: HeavyArmorNT
  - type: Repairable
    fuelCost: 60
    doAfterDelay: 40
  - type: StaticPrice
    price: 3000
  - type: Tag
    tags:
    - DoorBumpOpener
    - FootstepSound
    - Flail
    - MilitaryMechBounty
  - type: Prying
    pryPowered: true
    speedModifier: 5
    useSound:
      path: /Audio/Items/jaws_pry.ogg


- type: entity
  id: AFFlailE
  parent: [ BaseMech, EWARMechMount, BaseRestrictedContraband ]
  name: 'ASF-59-E「望远镜」 | ASF-59-E "Spyglass"'
  description: '基于连枷底盘的高度特化机甲。运用精密雷达系统提供指挥与控制能力，同时配备先进电子战武器。 | An extremely specialized mech based off the Flail Chassis. Uses sophisticated radar systems to provide command and control capabilities, in addition to employing advanced EWAR weaponry.'
  components:
  - type: Fixtures
    fixtures: # Custom hitbox
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 1.4
        density: 600
        restitution: 0.0
        mask:
        - MobMask
        layer:
        - MobLayer
        - MachineLayer
  - type: Sprite
    drawdepth: Mobs
    noRot: true
    sprite: _Mono/Objects/Specific/Mech/mechaS4.rsi
    layers:
    - map: [ "enum.MechVisualLayers.Base" ]
      state: flail
    - map: ["enum.PaperLabelVisuals.Layer"]
      sprite: Structures/Storage/Crates/labels.rsi
      state: paper
  - type: FootstepModifier
    footstepSoundCollection:
      path: /Audio/Mecha/sound_mecha_powerloader_step.ogg
  - type: Mech
    baseState: flail
    openState: flail-open
    brokenState: flail-broken
    mechToPilotDamageMultiplier: 0
    maxEquipmentAmount: 3
    airtight: true
    maxIntegrity: 2250
    pilotWhitelist:
      components:
        - HumanoidAppearance
        - BorgChassis
  - type: MeleeWeapon
    hidden: true
    attackRate: 1
    damage:
      types:
        Blunt: 50
        Structural: 550
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 4500
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:ChangeConstructionNodeBehavior
        node: start
      - !type:DoActsBehavior
        acts: ["Destruction"]
  - type: RadarConsole
    maxRange: 1024 #It's a radar/EWAC platform.
    followEntity: true
  - type: DetectionRangeMultiplier
    infraredMultiplier: 1.5 # from 1
    visualMultiplier: 8 # from 4
  - type: Appearance
  - type: GenericVisualizer
  - type: CanMoveInAir
  - type: MovementAlwaysTouching
  # EXTREMELY slow in gravity. Only really good to taxi, and that's about it. Even worse than S2s
  - type: MovementSpeedModifier
    baseWalkSpeed: 0.25
    baseSprintSpeed: 0.5
    baseWeightlessModifier: 20
  - type: RadarBlip
    radarColor: "#E3E3E3"
    scale: 3
    requireNoGrid: true
    shape: square
  - type: Damageable
    damageModifierSet: HeavyArmorNT
  - type: Repairable
    fuelCost: 60
    doAfterDelay: 40
  - type: StaticPrice
    price: 3000
  - type: Tag
    tags:
    - DoorBumpOpener
    - FootstepSound
    - Spyglass
    - MilitaryMechBounty
  - type: Prying
    pryPowered: true
    speedModifier: 5
    useSound:
      path: /Audio/Items/jaws_pry.ogg

- type: entity
  id: AFMace
  parent: [ BaseMech, HeavyMechMount, BaseRestrictedContraband ]
  name: 'ASF-59-B「Mace」 | ASF-59-B "Mace"'
  description: '随意改装的机体，装甲板被拆除以加装超大推进器。由于动力限制，仅能搭载单一武器，限制了多功能性。适配重型挂架。 | A haphazard refit, armor plating is stripped off to add oversized boosters to the machine. Due to the power constraints, it can only equip a single weapon, limiting versatilty. Fits Heavy Mounts.'
  components:
  - type: Fixtures
    fixtures: # Custom hitbox
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 1.4
        density: 600
        restitution: 0.0
        mask:
        - MobMask
        layer:
        - MobLayer
        - MachineLayer
  - type: Sprite
    drawdepth: Mobs
    noRot: true
    sprite: _Mono/Objects/Specific/Mech/mechaS4.rsi
    layers:
    - map: [ "enum.MechVisualLayers.Base" ]
      state: flail
    - map: ["enum.PaperLabelVisuals.Layer"]
      sprite: Structures/Storage/Crates/labels.rsi
      state: paper
  - type: FootstepModifier
    footstepSoundCollection:
      path: /Audio/Mecha/sound_mecha_powerloader_step.ogg
  - type: Mech
    baseState: flail
    openState: flail-open
    brokenState: flail-broken
    mechToPilotDamageMultiplier: 0
    maxEquipmentAmount: 2
    airtight: true
    maxIntegrity: 2000
    pilotWhitelist:
      components:
        - HumanoidAppearance
        - BorgChassis
  - type: MeleeWeapon
    hidden: true
    attackRate: 1
    # Shit punching damage, equip a melee weapon if you want to get up close
    damage:
      types:
        Blunt: 50
        Structural: 550
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 4000
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:ChangeConstructionNodeBehavior
        node: start
      - !type:DoActsBehavior
        acts: ["Destruction"]
  - type: RadarConsole
    maxRange: 512
    followEntity: true
  - type: Appearance
  - type: GenericVisualizer
  - type: CanMoveInAir
  - type: MovementAlwaysTouching
  # EXTREMELY slow in gravity. Only really good to taxi, and that's about it. Even worse than S2s
  - type: MovementSpeedModifier
    baseWalkSpeed: 0.1
    baseSprintSpeed: 1
    baseWeightlessModifier: 30
  - type: RadarBlip
    radarColor: "#E3E3E3"
    scale: 3
    requireNoGrid: true
    shape: square
  - type: Damageable
    damageModifierSet: HeavyArmorNT
  - type: Repairable
    fuelCost: 60
    doAfterDelay: 40
  - type: StaticPrice
    price: 3000
  - type: Tag
    tags:
    - DoorBumpOpener
    - FootstepSound
    - Mace
    - MilitaryMechBounty
  - type: Prying
    pryPowered: true
    speedModifier: 5
    useSound:
      path: /Audio/Items/jaws_pry.ogg
